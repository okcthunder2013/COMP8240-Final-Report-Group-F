wget https://github.com/facebookresearch/fastText/archive/v0.9.2.zip
unzip v0.9.2.zip
cd fastText-0.9.2
make
jq -r '. | "__label__" + (.category | gsub(" "; "_")) + " " + .headline' News_Category_Dataset_v3.json > data.txt
total_lines=$(wc -l < data.txt)
train_lines=$((total_lines * 8 / 10))
head -n $train_lines data.txt > train.txt
tail -n +$((train_lines + 1)) data.txt > test.txt
./fasttext supervised -input train.txt -output model_news
./fasttext test model_news.bin test.txt
awk '{label=$1; $1=""; sub(/^[ \t]+/, "", $0); text=tolower($0); gsub(/[[:punct:]]+/, "", text); print label " " text}' train.txt > preprocessed_train.txt
awk '{label=$1; $1=""; sub(/^[ \t]+/, "", $0); text=tolower($0); gsub(/[[:punct:]]+/, "", text); print label " " text}' test.txt > preprocessed_test.txt
./fasttext supervised -input preprocessed_train.txt -output model_news
./fasttext test model_news.bin preprocessed_test.txt
./fasttext supervised -input preprocessed_train.txt -output model_news -epoch 10
./fasttext test model_news.bin preprocessed_test.txt
./fasttext supervised -input preprocessed_train.txt -output model_news -epoch 10 -lr 0.5
./fasttext test model_news.bin preprocessed_test.txt
./fasttext supervised -input preprocessed_train.txt -output model_news -epoch 10 -lr 1.0
./fasttext test model_news.bin preprocessed_test.txt
./fasttext supervised -input preprocessed_train.txt -output model_news -epoch 10 -lr 1.0 -wordNgrams 2
./fasttext test model_news.bin preprocessed_test.txt
./fasttext supervised -input preprocessed_train.txt -output model_news -epoch 10 -lr 1.0 -wordNgrams 2 -loss one-vs-all
./fasttext test model_news.bin preprocessed_test.txt
